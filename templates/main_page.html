{% extends "base.html" %}
{% block content %}
<div class="header-section" style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
    <div>
        <h2>Meine FÃ¤cher Ãœbersicht</h2>
        <p>Angemeldet als: <strong>{{ current_user.username }}</strong></p>
    </div>
    <div>
        <a href="{{ url_for('semester_list') }}" class="btn btn-primary" style="margin-right: 10px;">
            ðŸ“Š Semester-Ãœbersicht
        </a>
        <a href="{{ url_for('add_semester') }}" class="btn btn-success">
            âž• Neues Semester
        </a>
    </div>
</div>

{% if faecher %}
<table class="table table-striped" style="width: 100%; margin-top: 20px;">
    <thead>
        <tr style="background-color: #f8f9fa;">
            <th>Fachname</th>
            <th>Semester</th>
            <th>Anzahl Noten</th>
            <th>Durchschnitt</th>
            <th>Pluspunkte</th>
            <th>Aktionen</th>
        </tr>
    </thead>
    <tbody>
        {% for fach in faecher %}
        <tr>
            <td>
                <a href="{{ url_for('fach', fach_id=fach.id) }}" style="text-decoration: none; font-weight: bold;">
                    {{ fach.fachname }}
                </a>
            </td>
            <td>
                <a href="{{ url_for('semester_detail', semester_id=fach.semester_id) }}" style="text-decoration: none;">
                    {{ fach.semester }}
                </a>
            </td>
            <td>{{ fach.anzahl_noten }}</td>
            <td>
                {% if fach.durchschnitt %}
                    <span style="font-weight: bold; color: {{ 'green' if fach.durchschnitt >= 4 else 'red' }};">
                        {{ fach.durchschnitt }}
                    </span>
                {% else %}
                    <span style="color: #999;">-</span>
                {% endif %}
            </td>
            <td>
                <span style="font-weight: bold; color: {{ 'green' if fach.pluspunkte and fach.pluspunkte >= 0 else 'red' }};">
                    {{ fach.pluspunkte if fach.pluspunkte else 0 }}
                </span>
            </td>
            <td>
                <a href="{{ url_for('add_note', fach_id=fach.id) }}" class="btn btn-sm btn-primary">
                    âž• Note
                </a>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info" style="margin-top: 30px; padding: 20px; text-align: center;">
    <h4>Noch keine FÃ¤cher vorhanden</h4>
    <p>Erstelle zuerst ein Semester, dann kannst du FÃ¤cher hinzufÃ¼gen.</p>
    <a href="{{ url_for('add_semester') }}" class="btn btn-success" style="margin-top: 10px;">
        âž• Erstes Semester erstellen
    </a>
</div>
{% endif %}
{% endblock %}