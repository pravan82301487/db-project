{% extends "base.html" %}
{% block content %}
<div class="header-section" style="margin-bottom: 20px; display: flex; justify-content: space-between; align-items: center;">
    <h2>ğŸ“š Meine Semester</h2>
    <a href="{{ url_for('add_semester') }}" class="btn btn-success">
        â• Neues Semester
    </a>
</div>

{% if semester %}
<table class="table table-striped" style="width: 100%; margin-top: 20px;">
    <thead>
        <tr style="background-color: #f8f9fa;">
            <th>Semester</th>
            <th>Anzahl FÃ¤cher</th>
            <th>Durchschnitt</th>
            <th>Pluspunkte</th>
            <th>Status</th>
            <th>Aktionen</th>
        </tr>
    </thead>
    <tbody>
        {% for sem in semester %}
        <tr>
            <td>
                <a href="{{ url_for('semester_detail', semester_id=sem.id) }}" style="text-decoration: none; font-weight: bold;">
                    {{ sem.name }}
                </a>
            </td>
            <td>{{ sem.anzahl_faecher }}</td>
            <td>
                {% if sem.durchschnitt %}
                    <span style="font-weight: bold; color: {{ 'green' if sem.durchschnitt >= 4 else 'red' }};">
                        {{ sem.durchschnitt }}
                    </span>
                {% else %}
                    <span style="color: #999;">-</span>
                {% endif %}
            </td>
            <td>
                <span style="font-weight: bold; color: {{ 'green' if sem.pluspunkte and sem.pluspunkte >= 0 else 'red' }};">
                    {{ sem.pluspunkte if sem.pluspunkte else 0 }}
                </span>
            </td>
            <td>
                {% if sem.pluspunkte is not none %}
                    {% if sem.pluspunkte >= 0 %}
                        <span class="label label-success">âœ“ Bestanden</span>
                    {% else %}
                        <span class="label label-danger">âœ— Nicht bestanden</span>
                    {% endif %}
                {% else %}
                    <span class="label label-default">Keine Noten</span>
                {% endif %}
            </td>
            <td>
                <a href="{{ url_for('add_fach', semester_id=sem.id) }}" class="btn btn-sm btn-primary">
                    â• Fach hinzufÃ¼gen
                </a>
                <form action="{{ url_for('delete_semester', semester_id=sem.id) }}" method="post" style="display: inline;" onsubmit="return confirm('MÃ¶chtest du das Semester \'{{ sem.name }}\' wirklich lÃ¶schen? Alle FÃ¤cher und Noten werden ebenfalls gelÃ¶scht!');">
                    <button type="submit" class="btn btn-sm btn-danger">
                        ğŸ—‘ï¸ LÃ¶schen
                    </button>
                </form>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% else %}
<div class="alert alert-info" style="margin-top: 30px; padding: 20px; text-align: center;">
    <h4>Noch keine Semester vorhanden</h4>
    <p>Erstelle dein erstes Semester, um loszulegen.</p>
    <a href="{{ url_for('add_semester') }}" class="btn btn-success" style="margin-top: 10px;">
        â• Erstes Semester erstellen
    </a>
</div>
{% endif %}
{% endblock %}